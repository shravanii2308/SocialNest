{"ast":null,"code":"import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPosts}from\"state\";import PostWidget from\"./PostWidget\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const PostsWidget=_ref=>{let{userId,isProfile=false}=_ref;const dispatch=useDispatch();const posts=useSelector(state=>state.posts);const token=useSelector(state=>state.token);const getPosts=async()=>{const response=await fetch(`${window.location.origin}/posts`,{method:\"GET\",headers:{Authorization:`Bearer ${token}`}});const data=await response.json();dispatch(setPosts({posts:data}));};const getUserPosts=async()=>{const response=await fetch(`${window.location.origin}/posts/${userId}/posts`,{method:\"GET\",headers:{Authorization:`Bearer ${token}`}});const data=await response.json();dispatch(setPosts({posts:data}));};useEffect(()=>{if(isProfile){getUserPosts();}else{getPosts();}},[]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsx(_Fragment,{children:posts.map(_ref2=>{let{_id,userId,firstName,lastName,description,location,picturePath,userPicturePath,likes,comments}=_ref2;return/*#__PURE__*/_jsx(PostWidget,{postId:_id,postUserId:userId,name:`${firstName} ${lastName}`,description:description,location:location,picturePath:picturePath,userPicturePath:userPicturePath,likes:likes,comments:comments},_id);})});};export default PostsWidget;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","setPosts","PostWidget","jsx","_jsx","Fragment","_Fragment","PostsWidget","_ref","userId","isProfile","dispatch","posts","state","token","getPosts","response","fetch","window","location","origin","method","headers","Authorization","data","json","getUserPosts","children","map","_ref2","_id","firstName","lastName","description","picturePath","userPicturePath","likes","comments","postId","postUserId","name"],"sources":["C:/vscode/DEVELOPMENT/SocialNest/client/src/scenes/widgets/PostsWidget.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setPosts } from \"state\";\r\nimport PostWidget from \"./PostWidget\";\r\n\r\nconst PostsWidget = ({ userId, isProfile = false }) => {\r\n  const dispatch = useDispatch();\r\n  const posts = useSelector((state) => state.posts);\r\n  const token = useSelector((state) => state.token);\r\n\r\n  const getPosts = async () => {\r\n    const response = await fetch(`${window.location.origin}/posts`, {\r\n      method: \"GET\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    const data = await response.json();\r\n    dispatch(setPosts({ posts: data }));\r\n  };\r\n\r\n  const getUserPosts = async () => {\r\n    const response = await fetch(\r\n      `${window.location.origin}/posts/${userId}/posts`,\r\n      {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    dispatch(setPosts({ posts: data }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isProfile) {\r\n      getUserPosts();\r\n    } else {\r\n      getPosts();\r\n    }\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <>\r\n      {posts.map(\r\n        ({\r\n          _id,\r\n          userId,\r\n          firstName,\r\n          lastName,\r\n          description,\r\n          location,\r\n          picturePath,\r\n          userPicturePath,\r\n          likes,\r\n          comments,\r\n        }) => (\r\n          <PostWidget\r\n            key={_id}\r\n            postId={_id}\r\n            postUserId={userId}\r\n            name={`${firstName} ${lastName}`}\r\n            description={description}\r\n            location={location}\r\n            picturePath={picturePath}\r\n            userPicturePath={userPicturePath}\r\n            likes={likes}\r\n            comments={comments}\r\n          />\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostsWidget;\r\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,UAAU,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtC,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAmC,IAAlC,CAAEC,MAAM,CAAEC,SAAS,CAAG,KAAM,CAAC,CAAAF,IAAA,CAChD,KAAM,CAAAG,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAa,KAAK,CAAGZ,WAAW,CAAEa,KAAK,EAAKA,KAAK,CAACD,KAAK,CAAC,CACjD,KAAM,CAAAE,KAAK,CAAGd,WAAW,CAAEa,KAAK,EAAKA,KAAK,CAACC,KAAK,CAAC,CAEjD,KAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,QAAQ,CAAE,CAC9DC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUT,KAAK,EAAG,CAC9C,CAAC,CAAC,CACF,KAAM,CAAAU,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCd,QAAQ,CAACV,QAAQ,CAAC,CAAEW,KAAK,CAAEY,IAAK,CAAC,CAAC,CAAC,CACrC,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1B,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,UAAUX,MAAM,QAAQ,CACjD,CACEY,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUT,KAAK,EAAG,CAC9C,CACF,CAAC,CACD,KAAM,CAAAU,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCd,QAAQ,CAACV,QAAQ,CAAC,CAAEW,KAAK,CAAEY,IAAK,CAAC,CAAC,CAAC,CACrC,CAAC,CAED1B,SAAS,CAAC,IAAM,CACd,GAAIY,SAAS,CAAE,CACbgB,YAAY,CAAC,CAAC,CAChB,CAAC,IAAM,CACLX,QAAQ,CAAC,CAAC,CACZ,CACF,CAAC,CAAE,EAAE,CAAC,CAAE;AAER,mBACEX,IAAA,CAAAE,SAAA,EAAAqB,QAAA,CACGf,KAAK,CAACgB,GAAG,CACRC,KAAA,MAAC,CACCC,GAAG,CACHrB,MAAM,CACNsB,SAAS,CACTC,QAAQ,CACRC,WAAW,CACXd,QAAQ,CACRe,WAAW,CACXC,eAAe,CACfC,KAAK,CACLC,QACF,CAAC,CAAAR,KAAA,oBACCzB,IAAA,CAACF,UAAU,EAEToC,MAAM,CAAER,GAAI,CACZS,UAAU,CAAE9B,MAAO,CACnB+B,IAAI,CAAE,GAAGT,SAAS,IAAIC,QAAQ,EAAG,CACjCC,WAAW,CAAEA,WAAY,CACzBd,QAAQ,CAAEA,QAAS,CACnBe,WAAW,CAAEA,WAAY,CACzBC,eAAe,CAAEA,eAAgB,CACjCC,KAAK,CAAEA,KAAM,CACbC,QAAQ,CAAEA,QAAS,EATdP,GAUN,CAAC,EAEN,CAAC,CACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAAvB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}