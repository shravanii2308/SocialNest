{"ast":null,"code":"import{ChatBubbleOutlineOutlined,FavoriteBorderOutlined,FavoriteOutlined,ShareOutlined}from\"@mui/icons-material\";import{Box,Divider,IconButton,Typography,useTheme}from\"@mui/material\";import FlexBetween from\"components/FlexBetween\";import Friend from\"components/Friend\";import WidgetWrapper from\"components/WidgetWrapper\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPost}from\"state\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PostWidget=_ref=>{let{postId,postUserId,name,description,location,picturePath,userPicturePath,likes,comments}=_ref;const[isComments,setIsComments]=useState(false);const dispatch=useDispatch();const token=useSelector(state=>state.token);const loggedInUserId=useSelector(state=>state.user._id);const isLiked=Boolean(likes[loggedInUserId]);const likeCount=Object.keys(likes).length;const{palette}=useTheme();const main=palette.neutral.main;const primary=palette.primary.main;const patchLike=async()=>{const response=await fetch(`${window.location.origin}/posts/${postId}/like`,{method:\"PATCH\",headers:{Authorization:`Bearer ${token}`,\"Content-Type\":\"application/json\"},body:JSON.stringify({userId:loggedInUserId})});const updatedPost=await response.json();dispatch(setPost({post:updatedPost}));};return/*#__PURE__*/_jsxs(WidgetWrapper,{m:\"2rem 0\",children:[/*#__PURE__*/_jsx(Friend,{friendId:postUserId,name:name,subtitle:location,userPicturePath:userPicturePath}),/*#__PURE__*/_jsx(Typography,{color:main,sx:{mt:\"1rem\"},children:description}),picturePath&&/*#__PURE__*/_jsx(\"img\",{width:\"100%\",height:\"auto\",alt:\"post\",style:{borderRadius:\"0.75rem\",marginTop:\"0.75rem\"},src:`${window.location.origin}/assets/${picturePath}`}),/*#__PURE__*/_jsxs(FlexBetween,{mt:\"0.25rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:patchLike,children:isLiked?/*#__PURE__*/_jsx(FavoriteOutlined,{sx:{color:primary}}):/*#__PURE__*/_jsx(FavoriteBorderOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:likeCount})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>setIsComments(!isComments),children:/*#__PURE__*/_jsx(ChatBubbleOutlineOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:comments.length})]})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(ShareOutlined,{})})]}),isComments&&/*#__PURE__*/_jsxs(Box,{mt:\"0.5rem\",children:[comments.map((comment,i)=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{sx:{color:main,m:\"0.5rem 0\",pl:\"1rem\"},children:comment})]},`${name}-${i}`)),/*#__PURE__*/_jsx(Divider,{})]})]});};export default PostWidget;","map":{"version":3,"names":["ChatBubbleOutlineOutlined","FavoriteBorderOutlined","FavoriteOutlined","ShareOutlined","Box","Divider","IconButton","Typography","useTheme","FlexBetween","Friend","WidgetWrapper","useState","useDispatch","useSelector","setPost","jsx","_jsx","jsxs","_jsxs","PostWidget","_ref","postId","postUserId","name","description","location","picturePath","userPicturePath","likes","comments","isComments","setIsComments","dispatch","token","state","loggedInUserId","user","_id","isLiked","Boolean","likeCount","Object","keys","length","palette","main","neutral","primary","patchLike","response","fetch","window","origin","method","headers","Authorization","body","JSON","stringify","userId","updatedPost","json","post","m","children","friendId","subtitle","color","sx","mt","width","height","alt","style","borderRadius","marginTop","src","gap","onClick","map","comment","i","pl"],"sources":["C:/vscode/DEVELOPMENT/SocialNest/client/src/scenes/widgets/PostWidget.jsx"],"sourcesContent":["import {\r\n  ChatBubbleOutlineOutlined,\r\n  FavoriteBorderOutlined,\r\n  FavoriteOutlined,\r\n  ShareOutlined,\r\n} from \"@mui/icons-material\";\r\nimport { Box, Divider, IconButton, Typography, useTheme } from \"@mui/material\";\r\nimport FlexBetween from \"components/FlexBetween\";\r\nimport Friend from \"components/Friend\";\r\nimport WidgetWrapper from \"components/WidgetWrapper\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setPost } from \"state\";\r\n\r\nconst PostWidget = ({\r\n  postId,\r\n  postUserId,\r\n  name,\r\n  description,\r\n  location,\r\n  picturePath,\r\n  userPicturePath,\r\n  likes,\r\n  comments,\r\n}) => {\r\n  const [isComments, setIsComments] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const token = useSelector((state) => state.token);\r\n  const loggedInUserId = useSelector((state) => state.user._id);\r\n  const isLiked = Boolean(likes[loggedInUserId]);\r\n  const likeCount = Object.keys(likes).length;\r\n\r\n  const { palette } = useTheme();\r\n  const main = palette.neutral.main;\r\n  const primary = palette.primary.main;\r\n\r\n  const patchLike = async () => {\r\n    const response = await fetch(\r\n      `${window.location.origin}/posts/${postId}/like`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ userId: loggedInUserId }),\r\n      }\r\n    );\r\n    const updatedPost = await response.json();\r\n    dispatch(setPost({ post: updatedPost }));\r\n  };\r\n\r\n  return (\r\n    <WidgetWrapper m=\"2rem 0\">\r\n      <Friend\r\n        friendId={postUserId}\r\n        name={name}\r\n        subtitle={location}\r\n        userPicturePath={userPicturePath}\r\n      />\r\n      <Typography color={main} sx={{ mt: \"1rem\" }}>\r\n        {description}\r\n      </Typography>\r\n      {picturePath && (\r\n        <img\r\n          width=\"100%\"\r\n          height=\"auto\"\r\n          alt=\"post\"\r\n          style={{ borderRadius: \"0.75rem\", marginTop: \"0.75rem\" }}\r\n          src={`${window.location.origin}/assets/${picturePath}`}\r\n        />\r\n      )}\r\n      <FlexBetween mt=\"0.25rem\">\r\n        <FlexBetween gap=\"1rem\">\r\n          <FlexBetween gap=\"0.3rem\">\r\n            <IconButton onClick={patchLike}>\r\n              {isLiked ? (\r\n                <FavoriteOutlined sx={{ color: primary }} />\r\n              ) : (\r\n                <FavoriteBorderOutlined />\r\n              )}\r\n            </IconButton>\r\n            <Typography>{likeCount}</Typography>\r\n          </FlexBetween>\r\n\r\n          <FlexBetween gap=\"0.3rem\">\r\n            <IconButton onClick={() => setIsComments(!isComments)}>\r\n              <ChatBubbleOutlineOutlined />\r\n            </IconButton>\r\n            <Typography>{comments.length}</Typography>\r\n          </FlexBetween>\r\n        </FlexBetween>\r\n\r\n        <IconButton>\r\n          <ShareOutlined />\r\n        </IconButton>\r\n      </FlexBetween>\r\n      {isComments && (\r\n        <Box mt=\"0.5rem\">\r\n          {comments.map((comment, i) => (\r\n            <Box key={`${name}-${i}`}>\r\n              <Divider />\r\n              <Typography sx={{ color: main, m: \"0.5rem 0\", pl: \"1rem\" }}>\r\n                {comment}\r\n              </Typography>\r\n            </Box>\r\n          ))}\r\n          <Divider />\r\n        </Box>\r\n      )}\r\n    </WidgetWrapper>\r\n  );\r\n};\r\n\r\nexport default PostWidget;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}